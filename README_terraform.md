## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | ~> 1.0 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | ~> 5.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_kubernetes"></a> [kubernetes](#provider\_kubernetes) | n/a |
| <a name="provider_random"></a> [random](#provider\_random) | n/a |

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_airflow_db"></a> [airflow\_db](#module\_airflow\_db) | ./modules/rds | n/a |
| <a name="module_airflow_efs"></a> [airflow\_efs](#module\_airflow\_efs) | ./modules/airflow-efs | n/a |
| <a name="module_db"></a> [db](#module\_db) | ./modules/rds | n/a |
| <a name="module_deployment"></a> [deployment](#module\_deployment) | ./modules/openmetadata-deployment | n/a |
| <a name="module_openmetadata_deps"></a> [openmetadata\_deps](#module\_openmetadata\_deps) | ./modules/openmetadata-dependencies | n/a |
| <a name="module_opensearch"></a> [opensearch](#module\_opensearch) | ./modules/opensearch | n/a |

## Resources

| Name | Type |
|------|------|
| [kubernetes_secret_v1.airflow_auth](https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/secret_v1) | resource |
| [kubernetes_secret_v1.airflow_db_credentials](https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/secret_v1) | resource |
| [kubernetes_secret_v1.db_credentials](https://registry.terraform.io/providers/hashicorp/kubernetes/latest/docs/resources/secret_v1) | resource |
| [random_password.airflow_auth](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_airflow"></a> [airflow](#input\_airflow) | Airflow configuration. | <pre>object({<br/>    credentials = optional(object({   # Airflow credentials<br/>      password = optional(object({    # Password secret<br/>        secret_key = optional(string) # Secret key for the Airflow password<br/>        secret_ref = optional(string) # Secret reference for the Airflow password<br/>      }))<br/>      username = optional(string) # Username for Airflow<br/>    }))<br/>    db = optional(object({                         # Airflow's database configuration<br/>      aws = optional(object({                      # AWS specific configuration for the Airflow database<br/>        backup_retention_period = optional(number) # Number of days to retain database backups<br/>        backup_window           = optional(string) # Preferred backup window for RDS<br/>        deletion_protection     = optional(bool)   # The database can't be deleted when this value is set to true<br/>        identifier              = optional(string) # Unique identifier for the AWS RDS instance<br/>        instance_class          = optional(string) # Instance class of the AWS RDS instance<br/>        maintenance_window      = optional(string) # Preferred maintenance window for RDS<br/>        multi_az                = optional(bool)   # Whether to enable multi-AZ deployment<br/>        skip_final_snapshot     = optional(bool)   # If true, no DBSnapshot is created when the database is deleted<br/>      }))<br/>      credentials = optional(object({   # Airflow database credentials<br/>        password = optional(object({    # Password secret<br/>          secret_key = optional(string) # Secret key for the Airflow database password<br/>          secret_ref = optional(string) # Secret reference for the Airflow database password<br/>        }))<br/>        username = optional(string) # Username for the Airflow database<br/>      }))<br/>      db_name = optional(string)   # Name of the Airflow database<br/>      engine = optional(object({   # Airflow database engine configuration<br/>        name    = optional(string) # One of 'postgres' or 'mysql'<br/>        version = optional(string) # Version of the database engine<br/>      }))<br/>      host         = optional(string) # Database host address for Airflow<br/>      port         = optional(number) # Port on which the Airflow database is accessible<br/>      provisioner  = string           # One of 'helm', 'aws', or 'existing'<br/>      storage_size = optional(number) # Size of the Airflow database storage in GB<br/>    }))<br/>    endpoint    = optional(string)   # Endpoint URL for the Airflow instance<br/>    provisioner = optional(string)   # One of 'helm' or 'existing'<br/>    logs_cleanup = optional(object({ # Airflow logs cleanup configuration<br/>      enabled     = optional(bool)   # Whether to enable log cleanup<br/>      schedule    = optional(string) # Schedule for log cleanup<br/>      retain_days = optional(number) # Number of days to retain logs<br/>    }))<br/>    storage = optional(object({ # Airflow storage configuration<br/>      dags = optional(number)   # Size of storage allocated for DAGs (in GB)<br/>      logs = optional(number)   # Size of storage allocated for logs (in GB)<br/>    }))<br/>  })</pre> | <pre>{<br/>  "db": {<br/>    "provisioner": "helm"<br/>  },<br/>  "provisioner": "helm"<br/>}</pre> | no |
| <a name="input_app_helm_chart_version"></a> [app\_helm\_chart\_version](#input\_app\_helm\_chart\_version) | Version of the OpenMetadata Helm chart to deploy. If not specified, the variable `app_version` will be used. | `string` | `null` | no |
| <a name="input_app_namespace"></a> [app\_namespace](#input\_app\_namespace) | Namespace in which to deploy the OpenMetadata application. | `string` | `"openmetadata"` | no |
| <a name="input_app_version"></a> [app\_version](#input\_app\_version) | OpenMetadata version to deploy. | `string` | `"1.6.2"` | no |
| <a name="input_db"></a> [db](#input\_db) | OpenMetadata's database configuration. | <pre>object({<br/>    aws = optional(object({                      # AWS specific configuration for the database<br/>      backup_retention_period = optional(number) # Number of days to retain database backups<br/>      backup_window           = optional(string) # Preferred backup window for RDS<br/>      deletion_protection     = optional(bool)   # The database can't be deleted when this value is set to true<br/>      identifier              = optional(string) # Unique identifier for the AWS RDS instance<br/>      instance_class          = optional(string) # Instance class of the AWS RDS instance<br/>      maintenance_window      = optional(string) # Preferred maintenance window for RDS<br/>      multi_az                = optional(bool)   # Whether to enable multi-AZ deployment<br/>      skip_final_snapshot     = optional(bool)   # If true, no DBSnapshot is created when the database is deleted<br/>    }))<br/>    credentials = optional(object({   # Database credentials<br/>      password = optional(object({    # Password secret<br/>        secret_key = optional(string) # Secret key for the database password<br/>        secret_ref = optional(string) # Secret reference for the database password<br/>      }))<br/>      username = optional(string) # Username for the database<br/>    }))<br/>    db_name = optional(string)   # Name of the database<br/>    engine = optional(object({   # Database engine configuration<br/>      name    = optional(string) # One of 'postgres' or 'mysql'<br/>      version = optional(string) # Version of the database engine<br/>    }))<br/>    host         = optional(string) # Database host address<br/>    port         = optional(number) # Port on which the database is accessible<br/>    provisioner  = string           # One of 'helm', 'aws', or 'existing'<br/>    storage_size = optional(number) # Size of the database storage in GB<br/>  })</pre> | <pre>{<br/>  "provisioner": "helm"<br/>}</pre> | no |
| <a name="input_docker_image_name"></a> [docker\_image\_name](#input\_docker\_image\_name) | Full path of the server Docker image name, excluding the tag. | `string` | `"docker.getcollate.io/openmetadata/server"` | no |
| <a name="input_docker_image_tag"></a> [docker\_image\_tag](#input\_docker\_image\_tag) | Docker image tag for the server. If not specified, the variable `app_version` will be used. | `string` | `null` | no |
| <a name="input_eks_nodes_sg_ids"></a> [eks\_nodes\_sg\_ids](#input\_eks\_nodes\_sg\_ids) | List of security group IDs attached to the EKS nodes. Allows traffic from the OpenMetadata application to the databases. | `list(string)` | `[]` | no |
| <a name="input_env_from"></a> [env\_from](#input\_env\_from) | List of Kubernetes secrets. Will be converted to environment variables for the OpenMetadata application. | `list(string)` | `[]` | no |
| <a name="input_extra_envs"></a> [extra\_envs](#input\_extra\_envs) | Extra environment variables for the OpenMetadata application. | `map(string)` | `{}` | no |
| <a name="input_initial_admins"></a> [initial\_admins](#input\_initial\_admins) | List of initial admins to create in the OpenMetadata application, without the domain name. | `string` | `"[admin]"` | no |
| <a name="input_kms_key_id"></a> [kms\_key\_id](#input\_kms\_key\_id) | ARN of the KMS key to encrypt database and backups. If not specified, your account's default KMS key will be used. | `string` | `null` | no |
| <a name="input_opensearch"></a> [opensearch](#input\_opensearch) | Configuration for OpenSearch domain for OpenMetadata. | <pre>object({<br/>    aws = optional(object({                      # AWS specific configuration<br/>      availability_zone_count = optional(number) # Number of availability zones to deploy the OpenSearch domain<br/>      domain_name             = optional(string) # The OpenSearch domain name<br/>      engine_version          = optional(string) # OpenSearch engine version<br/>      instance_count          = optional(number) # Number of OpenSearch instances<br/>      instance_type           = optional(string) # OpenSearch instance type<br/>      tls_security_policy     = optional(string) # OpenSearch TLS security policy<br/>    }))<br/>    credentials = optional(object({<br/>      password = optional(object({    # Password secret<br/>        secret_ref = optional(string) # Secret reference for OpenSearch password<br/>        secret_key = optional(string) # Secret key for OpenSearch password<br/>      }))<br/>      username = optional(string) # OpenSearch username<br/>    }))<br/>    host          = optional(string) # OpenSearch host<br/>    port          = optional(string) # OpenSearch port, hardcoded to 443 if opensearch.provisioner is 'aws'<br/>    provisioner   = optional(string) # One of 'helm', 'aws', or 'existing'<br/>    scheme        = optional(string) # OpenSearch scheme, hardcoded to 'https' if opensearch.provisioner is 'aws'<br/>    storage_class = optional(string) # OpenSearch storage class<br/>    volume_size   = optional(number) # OpenSearch storage size in GB<br/>  })</pre> | <pre>{<br/>  "provisioner": "helm"<br/>}</pre> | no |
| <a name="input_principal_domain"></a> [principal\_domain](#input\_principal\_domain) | Domain name of the users. For example, `open-metadata.org`. | `string` | `"open-metadata.org"` | no |
| <a name="input_subnet_ids"></a> [subnet\_ids](#input\_subnet\_ids) | List of subnet IDs where the databases and OpenSearch will be deployed. The recommended configuration is to use private subnets. | `list(string)` | `[]` | no |
| <a name="input_vpc_id"></a> [vpc\_id](#input\_vpc\_id) | VPC ID for deploying the databases and OpenSearch. For example, `vpc-xxxxxxxx`. | `string` | `null` | no |

## Outputs

No outputs.